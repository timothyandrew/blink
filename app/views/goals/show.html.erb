<% breadcrumb :goal, @student, @goal %>

<h1 class="new-goal-header"> <span class="new-goal-parent-name"><%= @goal.title %></span> </h1>
<div class="student-actions pull-right">
  <%= link_to "Edit Goal", edit_student_goal_path(@student, @goal), class: "btn btn-primary" %>

  <% if @goal.completed? %>
    <%= link_to "Uncomplete", uncomplete_student_goal_path(@student, @goal), method: :put, class: "btn btn-danger" %>
  <% else %>
    <%= link_to "Complete", complete_student_goal_path(@student, @goal), method: :put, class: "btn btn-info" %>
  <% end %>


  <div class="btn-group">
    <%= link_to "Show All", "#", class: "show-all btn btn-success" %>
    <%= link_to "Hide All", "#", class: "hide-all btn btn-warning" %>
  </div>

  <%= link_to "Delete", student_goal_path(@student, @goal), method: :delete, class: "btn btn-danger",
    data: {confirm: "Are you sure? This will destroy this goal and all sub-goals, and there's no undo!"} %>
</div>

<% if goal.start && goal.end %>
<h2 class="new-goal-subheader"><%= goal.expanded_date_range %></h2>
<% end %>

<%= render partial: "goals", locals: {goals: [goal], depth: @goal.depth, parent_id: nil} %>

<%= render "goal_toggle_js" %>
